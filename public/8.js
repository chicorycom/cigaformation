(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"5bvt":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".overlay-page[data-v-9d403538]{position:relative}.overlay-page .caption[data-v-9d403538]{position:absolute;background-color:rgba(0,7,28,.7);top:0;left:0;right:0;bottom:0}",""])},Ir97:function(t,e,a){"use strict";var s=a("zuG8");a.n(s).a},MJoI:function(t,e,a){"use strict";var s=a("pHpH");a.n(s).a},OPqB:function(t,e){t.exports="/images/banner_thumbnail.jpg?6c5616471c2dcaf2d6c819ee935add05"},Rcjj:function(t,e){t.exports="/images/480x113.png?f6ad18b62d90b3f63894a6cb43ac8c87"},Z4LL:function(t,e,a){"use strict";a.r(e);var s=a("o0o1"),i=a.n(s),n=a("4HBT"),r=a.n(n),o=a("L2JU"),c=a("vDqi"),l=a.n(c),u={name:"TypePage",props:{type:{type:String,default:"GRID"}}},p=(a("Ir97"),a("KHd+"));function d(t,e,a,s,i,n,r){try{var o=t[n](r),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(s,i)}function f(t){return function(){var e=this,a=arguments;return new Promise((function(s,i){var n=t.apply(e,a);function r(t){d(n,s,i,r,o,"next",t)}function o(t){d(n,s,i,r,o,"throw",t)}r(void 0)}))}}function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function m(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var g={name:"pages",data:function(){return{form:new r.a({id:null,menus:[],background:"",title:"",excerpt:"",type:"GRID"}),pages:[],showModal:!1,img:a("OPqB"),preview_img:a("OPqB"),banner:a("jOOs")}},components:{TypePage:Object(p.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-wrap"},[t._l(12,(function(e){return"GRID"===t.type?a("div",{staticClass:"page grid-type"}):t._e()})),t._v(" "),t._l(3,(function(e){return"LIST"===t.type?a("div",{staticClass:"page list-type"}):t._e()})),t._v(" "),t._l(2,(function(e){return"DETAIL"===t.type?a("div",{staticClass:"d-flex w-100 mb-1"},[a("div",{staticClass:"page detail-type"}),t._v(" "),t._m(0,!0)]):t._e()}))],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-flex flex-column w-50"},[e("p",{staticClass:"detail-text page"}),this._v(" "),e("p",{staticClass:"detail-text page"}),this._v(" "),e("p",{staticClass:"detail-text page"}),this._v(" "),e("p",{staticClass:"detail-text page half"})])}],!1,null,"810648d6",null).exports},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){m(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(o.b)({menus:"menus/publicMenus"})),created:function(){this.getPages()},methods:{restore:function(){this.title="",this.form.reset(),this.preview_img=a("Rcjj")},store:function(){var t=this,e="/".concat(config.base,"/page-store");this.form.id&&(this.form._method="PUT",e="/".concat(config.base,"/page-update/").concat(this.form.id)),this.form.submit("post",e,{transformRequest:[function(e,a){return t.gformData(e)}]}).then((function(){t.restore(),t.pages=[],t.showModal=!1,t.getPages()}))},getPages:function(){var t=this;return f(i.a.mark((function e(){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/".concat(config.base,"/page-data"));case 2:a=e.sent,s=a.data,t.pages=s;case 5:case"end":return e.stop()}}),e)})))()},onEdit:function(t){var e=this;return f(i.a.mark((function a(){var s,n;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.a.get("/".concat(config.base,"/page-data/").concat(t,"/edit"));case 2:return s=a.sent,n=s.data,a.next=6,e.form.fill(n);case 6:e.form.menus=n.menus.map((function(t){return t.id})),e.preview_img=n.background,e.showModal=!0;case 9:case"end":return a.stop()}}),a)})))()},onDelete:function(t){var e=this;this.$delete(t,f(i.a.mark((function a(){return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.a.delete("/".concat(config.base,"/page-delete/").concat(t));case 2:e.pages=e.pages.filter((function(e){return e.id!==t}));case 3:case"end":return a.stop()}}),a)}))))},selectImg:function(t){var e=this,a=t.target.files,s=new FileReader;s.addEventListener("load",(function(){e.preview_img=s.result})),s.readAsDataURL(a[0]),this.form.background=a[0]}}},h=(a("MJoI"),Object(p.a)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("header",{staticClass:"card-header card-header-with-icons"},[a("h4",{staticClass:"card-header-title"},[t._v("All Pages front")]),t._v(" "),a("ul",{staticClass:"list-inline mb-0"},[a("li",{staticClass:"list-inline-item"},[a("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{type:"button"},on:{click:function(e){t.showModal=!0}}},[a("span",{staticClass:"fas fa-plus"}),t._v(" Ajouter\n                ")])]),t._v(" "),t._m(0),t._v(" "),t._m(1)])]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},t._l(t.pages,(function(e){return a("div",{staticClass:"col-lg-3 col-md-4 col-sm-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"overlay-page"},[a("img",{staticClass:"card-img",attrs:{src:e.thumbnail,alt:"Card image"}}),t._v(" "),a("div",{staticClass:"caption d-flex align-items-center justify-content-center text-white"},[a("h5",{staticClass:"card-title",domProps:{textContent:t._s(e.title)}})])]),t._v(" "),a("div",{staticClass:"card-body"},[a("type-page",{attrs:{type:e.type}})],1),t._v(" "),a("div",{staticClass:"card-footer align-items-center justify-content-center d-flex"},[a("ul",{staticClass:"list-inline mb-0"},[t._m(2,!0),t._v(" "),a("li",{staticClass:"list-inline-item"},[a("button",{staticClass:"btn btn-sm btn-outline-warning",attrs:{type:"button"},on:{click:function(){return t.onEdit(e.id)}}},[a("span",{staticClass:"fas fa-edit"})])]),t._v(" "),a("li",{staticClass:"list-inline-item"},[a("button",{staticClass:"btn btn-sm btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.onDelete(e.id)}}},[a("i",{staticClass:"fas fa-trash"})])])])])])])})),0)]),t._v(" "),t.showModal?a("modal",{attrs:{btn:""},on:{close:function(e){t.restore(),t.showModal=!1}}},[a("div",{staticClass:"card",attrs:{slot:"container"},slot:"container"},[a("span",{staticClass:"close ",on:{click:function(e){t.restore(),t.showModal=!1}}},[a("i",{staticClass:"far fa-times-circle"})]),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.store(e)},keydown:function(e){return t.form.onKeydown(e)}}},[a("header",{staticClass:"card-header card-header-with-icons"},[a("h1",{staticClass:"h2 mb-2"},[t._v("Create PAGE")])]),t._v(" "),a("div",{staticClass:"card-body "},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t._v("\n                                            Type\n                                        ")])]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.type,expression:"form.type"}],staticClass:"form-control ",class:{"is-invalid":t.form.errors.has("type")},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"GRID"}},[t._v("GRID")]),t._v(" "),a("option",{attrs:{value:"LIST"}},[t._v("LIST")]),t._v(" "),a("option",{attrs:{value:"DETAIL"}},[t._v("DETAIL")])]),t._v(" "),a("has-error",{attrs:{form:t.form,field:"type"}})],1)])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t._v("\n                                        Title\n                                    ")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("title")},attrs:{type:"text",placeholder:"Title "},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"title"}})],1)])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t._v("\n                                            Excerpt\n                                        ")])]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.excerpt,expression:"form.excerpt"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("excerpt")},domProps:{value:t.form.excerpt},on:{input:function(e){e.target.composing||t.$set(t.form,"excerpt",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"excerpt"}})],1)])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"preview-thumbnail d-flex justify-content-center align-items-center",class:{"is-invalid":t.form.errors.has("img_read")},style:{background:"url("+t.preview_img+") no-repeat scroll center center / cover"}},[a("input",{staticClass:"inputfile",attrs:{type:"file",placeholder:"Image",id:"img_read"},on:{change:t.selectImg}}),t._v(" "),a("label",{attrs:{for:"img_read"}},[a("i",{staticClass:"fas fa-upload"})])])])]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t._v("\n                                            Menu\n                                        ")])]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.menus,expression:"form.menus"}],staticClass:"form-control ",class:{"is-invalid":t.form.errors.has("menus")},attrs:{multiple:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"menus",e.target.multiple?a:a[0])}}},[t._l(t.menus,(function(e){return[0===e.children.length?a("option",{domProps:{value:e.id}},[t._v(t._s(e.name))]):a("optgroup",{attrs:{label:e.name}},t._l(e.children,(function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})),0)]}))],2),t._v(" "),a("has-error",{attrs:{form:t.form,field:"menus"}})],1)])])])]),t._v(" "),a("footer",{staticClass:"card-footer d-md-flex align-items-center justify-content-between"},[a("v-button",{attrs:{loading:t.form.busy,type:"reset",typeStyle:"default"}},[a("h2",[a("i",{staticClass:"fas fa-sync-alt"})]),t._v("\n                        Reset\n                    ")]),t._v(" "),a("v-button",{staticClass:"btn btn-primary",attrs:{loading:t.form.busy}},[a("h2",[a("i",{staticClass:"fas fa-save"})]),t._v("\n                        Enregisté\n                    ")])],1)])])]):t._e()],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"list-inline-item"},[e("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{type:"button"}},[e("span",{staticClass:"fas fa-sync-alt"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"list-inline-item"},[e("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{type:"button"}},[e("i",{staticClass:"fas fa-undo-alt"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"list-inline-item"},[e("button",{staticClass:"btn btn-sm btn-outline-success",attrs:{type:"button"}},[e("span",{staticClass:"fas fa-eye"})])])}],!1,null,"9d403538",null));e.default=h.exports},jOOs:function(t,e){t.exports="/images/banner.jpg?ec4d173f890390ffa3d43cb0caeae54d"},jeks:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".page[data-v-810648d6]{background:#b5c3ca}.grid-type[data-v-810648d6]{width:70px;height:50px;margin:4px}.list-type[data-v-810648d6]{width:100%;height:50px;margin:7px 0}.detail-type[data-v-810648d6]{width:50%;height:100px}.detail-text[data-v-810648d6]{margin:7px;width:100%;height:10px;border-radius:2px}.detail-text.half[data-v-810648d6]{width:50%}",""])},pHpH:function(t,e,a){var s=a("5bvt");"string"==typeof s&&(s=[[t.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,i);s.locals&&(t.exports=s.locals)},zuG8:function(t,e,a){var s=a("jeks");"string"==typeof s&&(s=[[t.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,i);s.locals&&(t.exports=s.locals)}}]);